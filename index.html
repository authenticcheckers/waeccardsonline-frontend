<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>waeccardsonline — Instant WASSCE & BECE Voucher Delivery</title>
<meta name="description" content="Buy authentic WASSCE and BECE checker vouchers. Instant SMS delivery." />
<script src="https://js.paystack.co/v1/inline.js"></script>

<style>
  /* ------------------------------
      MOBILE-OPTIMIZED UI + SMOOTHER ANIMATIONS
     ------------------------------ */
  :root{
    --primary:#1d4ed8;
    --primary-light:#3b82f6;
    --text:#1e293b;
    --muted:#64748b;
    --border:#e2e8f0;
    --bg:#f8fafc;
    --card-bg:#ffffff;
  }

  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}

  body{
    background:var(--bg);
    color:var(--text);
    line-height:1.55;
    animation:fadeIn .55s ease;
    -webkit-tap-highlight-color:transparent;
  }

  /* ANIMATIONS */
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  @keyframes slideUp{from{opacity:0;transform:translateY(22px)}to{opacity:1;transform:translateY(0)}}
  @keyframes popIn{0%{transform:scale(.92);opacity:0}100%{transform:scale(1);opacity:1}}
  @keyframes softGlow{0%{box-shadow:0 0 0 rgba(0,0,0,0)}100%{box-shadow:0 8px 25px rgba(29,78,216,.15)}}

  .container{
    max-width:1100px;margin:0 auto;padding:22px;
    animation:slideUp .55s ease;
  }

  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:26px;animation:fadeIn .7s ease}

  .brand{display:flex;align-items:center;gap:12px}

  .logo{
    width:46px;height:46px;border-radius:10px;
    background:var(--primary);
    display:flex;align-items:center;justify-content:center;
    color:#fff;font-weight:700;font-size:20px;
    animation:popIn .5s ease;
  }

  nav a{
    margin-left:18px;color:var(--muted);font-weight:600;font-size:15px;text-decoration:none;
    transition:.22s ease;
  }
  nav a:hover{color:var(--primary);transform:translateY(-2px)}

  /* HERO */
  .hero{
    display:grid;grid-template-columns:1fr 420px;gap:26px;margin-top:18px;align-items:flex-start;
    animation:slideUp .6s ease;
  }

  .hero-left h1{font-size:38px;font-weight:800;margin-bottom:12px;animation:slideUp .75s ease}

  .hero-left p{font-size:16px;color:var(--muted);margin-bottom:20px}

  .btn{
    background:var(--primary);
    color:white;padding:14px 18px;border:none;border-radius:11px;
    font-weight:600;cursor:pointer;font-size:16px;transition:0.2s ease;
    animation:fadeIn .9s ease;
    width:100%;
  }
  .btn:hover{background:var(--primary-light);transform:translateY(-2px)}
  .btn:active{transform:scale(.97)}

  .card{
    background:var(--card-bg);
    border:1px solid var(--border);
    padding:22px;border-radius:14px;
    box-shadow:0 1px 4px rgba(0,0,0,0.06);
    animation:slideUp .75s ease;
  }

  label{display:block;margin-top:16px;margin-bottom:6px;font-weight:600;color:var(--text)}

  .input{
    width:100%;padding:14px;border-radius:8px;border:1px solid var(--border);
    background:#fff;font-size:15px;transition:.15s;
  }
  .input:focus{
    outline:none;border-color:var(--primary-light);
    box-shadow:0 0 0 2px rgba(59,130,246,0.15);
  }

  .small{
    font-size:13px;color:var(--muted)
  }

  .voucher-list{margin-top:12px;border-radius:8px;padding:12px;background:#f1f5f9;border:1px solid var(--border)}
  .voucher-item{padding:8px 10px;border-radius:6px;background:white;margin-bottom:8px;border:1px solid var(--border);font-family:monospace}

  footer{text-align:center;color:var(--muted);padding:28px 0;margin-top:40px}

  /* MOBILE OPTIMIZATION */
  @media(max-width:900px){
    .hero{grid-template-columns:1fr}
    nav a{margin-left:14px}
    .hero-left h1{font-size:32px;line-height:1.25}
    .container{padding:18px}
  }

  @media(max-width:480px){
    header{flex-direction:column;gap:14px;text-align:center}
    nav a{font-size:14px;margin-left:6px}
    .hero-left h1{font-size:28px}
    .btn{font-size:15px;padding:12px}
    .card{padding:18px}
  }
</style>
</head>

<body>
<div class="container">

<header>
  <div class="brand">
    <div class="logo">AC</div>
    <div>
      <div style="font-weight:800;font-size:17px">Waec Gh Cards Online</div>
      <div style="font-size:14px;color:var(--muted)">Instant voucher delivery</div>
    </div>
  </div>

  <nav>
    <a href="#how">How it works</a>
    <a href="#faq">FAQ</a>
    <a href="#retrieve">Retrieve</a>
    <a href="#buy">Buy Now</a>
  </nav>
</header>

<section class="hero" id="buy">
  <div class="hero-left">
    <h1>Buy WASSCE & BECE Vouchers <span style="color:var(--primary)">Instantly</span></h1>
    <p>Secure, fast delivery. Receive your voucher instantly after payment.</p>
    <button class="btn" onclick="document.getElementById('wassceForm').scrollIntoView({behavior:'smooth'})">Buy Voucher</button>
    <div style="margin-top:16px;color:var(--muted)"><strong>Price:</strong> GHS 25 per voucher</div>
  </div>

  <div class="hero-right card">
    <h3 style="margin-bottom:6px">Purchase WASSCE Voucher</h3>
    <div style="font-size:14px;color:var(--muted);margin-bottom:14px">Enter your details — we send the voucher by SMS.</div>

    <form id="wassceForm" onsubmit="startPayment(event,'WASSCE')">
      <label>Full Name</label>
      <input id="name_w" class="input" required />

      <label>Phone number</label>
      <input id="phone_w" class="input" placeholder="0244123456" pattern="[0-9]+" required />
      <div class="small">Use a Ghanaian number (e.g. 0244123456)</div>

      <label style="margin-top:12px">Quantity</label>
      <select id="qty_w" class="input" style="width:120px;">
  <option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>

      </select>

      <button class="btn" type="submit" style="margin-top:16px;width:100%">Pay GHS <span id="price_w">25</span></button>
      <div id="msg_w" style="margin-top:10px;color:var(--muted);font-size:14px"></div>

      <div id="vouchers_w" class="voucher-list" style="display:none"></div>
    </form>
  </div>
</section>

<section class="card" style="margin-top:32px">
  <h2>Purchase BECE Voucher</h2>
  <p style="color:var(--muted);margin-bottom:10px">Buy BECE checker voucher — delivered instantly via SMS.</p>

  <form id="beceForm" onsubmit="startPayment(event,'BECE')">
    <label>Full Name</label>
    <input id="name_b" class="input" required />

    <label>Phone number</label>
    <input id="phone_b" class="input" placeholder="0244123456" pattern="[0-9]+" required />
    <div class="small">Use a Ghanaian number (e.g. 0244123456)</div>

    <label style="margin-top:12px">Quantity</label>
    <select id="qty_b" class="input" style="width:120px;">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>

    <button class="btn" type="submit" style="margin-top:16px;width:100%">Pay GHS <span id="price_b">25</span></button>
    <div id="msg_b" style="margin-top:10px;color:var(--muted);font-size:14px"></div>

    <div id="vouchers_b" class="voucher-list" style="display:none"></div>
  </form>
</section>

<section id="retrieve" class="card" style="margin-top:28px">
  <h3>Retrieve Purchased Vouchers</h3>
  <div style="font-size:14px;color:var(--muted);margin-bottom:12px">Enter the phone number or email you used to buy vouchers.</div>

  <div style="display:flex;gap:8px;flex-wrap:wrap">
    <input id="retrieve_input" class="input" placeholder="0244123456 or example@domain.com" style="flex:1;min-width:220px"/>
    <button class="btn" onclick="retrieveVouchers()" style="width:auto;padding:12px 16px">Retrieve</button>
  </div>

  <div id="retrieve_msg" style="margin-top:12px;color:var(--muted)"></div>
  <div id="retrieve_list" class="voucher-list" style="display:none"></div>
</section>

<section id="how" class="card" style="margin-top:28px">
  <h3>How it works</h3>
  <ol style="color:var(--muted);margin-top:10px;padding-left:20px">
    <li>Fill details and complete payment via Paystack.</li>
    <li>We verify payment and reserve unused voucher(s).</li>
    <li>Voucher(s) are sent instantly to your phone via SMS and shown here.</li>
  </ol>
</section>

<section id="faq" class="card" style="margin-top:18px">
  <h3>FAQ</h3>
  <div style="color:var(--muted);margin-top:10px">
    <strong>Delivery Time:</strong> Instant after payment.<br>
    <strong>Didn't receive SMS?</strong> Contact support.
  </div>
</section>

</div>

<script>
const BACKEND="https://waecghcardsonline-backend.onrender.com";
const PAYSTACK_PUBLIC_KEY="pk_live_35ae3de1d58c5051f8a2666fe8ce7a5076d47e65";
const PRICE_PER_VOUCHER_GHS = 25;

function showMsg(el,text,isError=false){
  el.textContent=text;
  el.style.color=isError?'#dc2626':'#16a34a';
}

function renderVoucherList(container, vouchers){
  if(!vouchers || vouchers.length === 0){
    container.style.display = 'none';
    return;
  }
  container.innerHTML = '';
  vouchers.forEach(v => {
    const d = document.createElement('div');
    d.className = 'voucher-item';
    d.textContent = `${v.type || ''} — ${v.serial} | ${v.pin} ${v.date?(' — '+new Date(v.date).toLocaleString()):''}`;
    container.appendChild(d);
  });
  container.style.display = 'block';
}

// update displayed price when qty changes
function updatePriceIndicators(){
  const qtyW = Number(document.getElementById('qty_w').value || 1);
  const qtyB = Number(document.getElementById('qty_b').value || 1);
  document.getElementById('price_w').textContent = PRICE_PER_VOUCHER_GHS * qtyW;
  document.getElementById('price_b').textContent = PRICE_PER_VOUCHER_GHS * qtyB;
}
document.getElementById('qty_w').addEventListener('change', updatePriceIndicators);
document.getElementById('qty_b').addEventListener('change', updatePriceIndicators);
updatePriceIndicators();

function startPayment(e,type){
  e.preventDefault();

  const nameEl = document.getElementById(type==='WASSCE'?'name_w':'name_b');
  const phoneEl = document.getElementById(type==='WASSCE'?'phone_w':'phone_b');
  const qtyEl = document.getElementById(type==='WASSCE'?'qty_w':'qty_b');
  const msg = document.getElementById(type==='WASSCE'?'msg_w':'msg_b');
  const vouchersContainer = document.getElementById(type==='WASSCE'?'vouchers_w':'vouchers_b');

  const name = nameEl.value.trim();
  const phone = phoneEl.value.trim();
  const quantity = Number(qtyEl.value || 1);

  if(!name || !phone){
    showMsg(msg,"Please enter name and phone",true);
    return;
  }

  // construct a pseudo-email for Paystack (if you don't collect real emails)
  const email = (phone.includes('@') || phone.includes('.')) ? phone : `${phone}@autovoucher.com`;

  const amount = PRICE_PER_VOUCHER_GHS * quantity * 100; // in pesewas

  const handler = PaystackPop.setup({
    key: PAYSTACK_PUBLIC_KEY,
    email,
    amount,
    currency:"GHS",
    metadata:{
      voucher_type: type,
      phone,
      name,
      quantity
    },
    callback:function(response){
      showMsg(msg,"Verifying payment...");
      vouchersContainer.style.display = 'none';
      fetch(`${BACKEND}/verify-payment`,{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({ reference:response.reference })
      })
      .then(r=>r.json())
      .then(data=>{
        if(data && data.success && Array.isArray(data.vouchers) && data.vouchers.length>0){
          // show list of vouchers to the user inline
          renderVoucherList(vouchersContainer, data.vouchers);
          showMsg(msg, `Payment verified — ${data.vouchers.length} voucher(s) delivered.`);
        } else if (data && data.success && !data.vouchers){
          showMsg(msg, "Payment verified. No voucher delivered yet. Try again in a few seconds.");
        } else {
          showMsg(msg, data.message || "Delivery pending… Please wait 20 seconds.", true);
        }
      })
      .catch((err)=> {
        console.error(err);
        showMsg(msg,"Server error verifying payment",true);
      });
    },

    onClose:function(){
      showMsg(msg,"Payment cancelled",true);
    }
  });

  handler.openIframe();
}

async function retrieveVouchers(){
  const input = document.getElementById('retrieve_input').value.trim();
  const msg = document.getElementById('retrieve_msg');
  const list = document.getElementById('retrieve_list');

  if(!input){
    showMsg(msg, "Please enter phone or email", true);
    return;
  }
  showMsg(msg, "Searching...");
  list.style.display = 'none';
  list.innerHTML = '';

  // decide whether input looks like phone or email
  let url = `${BACKEND}/retrieve-vouchers?`;
  if(input.includes('@')) url += `email=${encodeURIComponent(input)}`;
  else url += `phone=${encodeURIComponent(input)}`;

  try {
    const res = await fetch(url);
    const data = await res.json();
    if(data && data.success && Array.isArray(data.vouchers) && data.vouchers.length > 0){
      renderVoucherList(list, data.vouchers);
      showMsg(msg, `Found ${data.vouchers.length} voucher(s).`);
    } else {
      showMsg(msg, "No vouchers found for that phone/email.", true);
    }
  } catch (err){
    console.error(err);
    showMsg(msg, "Server error retrieving vouchers", true);
  }
}
</script>

</body>
</html>
