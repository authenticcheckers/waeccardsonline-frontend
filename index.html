<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>waeccardsonline — Instant WASSCE & BECE Voucher Delivery</title>
<meta name="description" content="Buy authentic WASSCE and BECE checker vouchers. Instant SMS delivery."/>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://js.paystack.co/v1/inline.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

:root{ --navy:#07132b; --gold:#d4af37; --gold-dark:#b78f2b; }
body{
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
    margin:0;
    background:radial-gradient(ellipse at top left,var(--navy),#020617);
    color:#fff;
}
.glass{ backdrop-filter:blur(8px) saturate(120%); background-color:rgba(255,255,255,0.02);}
.btn{ background:var(--gold); color:var(--navy); font-weight:700; padding:.75rem 1.25rem; border-radius:.75rem;}
.muted{color:rgba(255,255,255,0.75)}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:1.25rem; border-radius:12px;}
a{color:var(--gold); text-decoration:none}
.input{width:100%;padding:.75rem;border-radius:.5rem;background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.03);color:#fff}
.small{font-size:.9rem;color:rgba(255,255,255,0.7)}

/* Mobile Fixes */
@media (max-width:768px){
  nav{flex-direction:column; gap:1rem; text-align:center;}
  nav .flex.items-center.gap-6{flex-wrap:wrap; justify-content:center; gap:1.2rem;}
  header{padding-top:4rem; padding-bottom:4rem;}
  header h1{font-size:2rem; line-height:1.25;}
}
</style>
</head>

<body>
<nav class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
  <a href="/" class="flex items-center gap-3">
    <img src="/assets/logo.svg" class="w-12 h-12 rounded-xl"/>
    <div>
      <div class="text-lg font-semibold">waecghcardsonline</div>
      <div class="text-xs muted">Instant voucher delivery</div>
    </div>
  </a>
  <div class="flex items-center gap-6 text-sm">
    <a href="#how" class="muted">How it works</a>
    <a href="/admin/admin.html" class="muted">Admin</a>
    <a href="#faq" class="muted">FAQ</a>
    <a href="#buy" class="btn">Buy Now</a>
  </div>
</nav>

<header class="max-w-6xl mx-auto px-6 text-center py-20">
  <h1 class="text-4xl md:text-6xl font-extrabold mb-4">
    Buy WASSCE & BECE Vouchers <span style="color:var(--gold)">Instantly</span>
  </h1>
  <p class="muted max-w-2xl mx-auto mb-8">
    Fast, secure and reliable. Receive your voucher instantly via SMS after payment.
  </p>
  <a href="#buy" class="btn">Buy Voucher Now</a>
</header>

<main class="max-w-4xl mx-auto px-6 pb-20">

  <!-- BUY FORM -->
  <section id="buy" class="card glass mb-8" data-aos="fade-up">
    <h2 class="text-2xl font-semibold mb-4">Purchase Voucher</h2>

    <form id="buyForm" class="space-y-4" novalidate>

      <div>
        <label class="text-sm block mb-1">Full Name</label>
        <input id="name" class="input" required />
      </div>

      <div>
        <label class="text-sm block mb-1">Phone Number</label>
        <input id="phone" class="input" pattern="\d+" required />
        <div class="small">e.g. 0244123456</div>
      </div>

      <div>
        <label class="text-sm block mb-1">Voucher Type</label>
        <select id="voucherType" class="input">
          <option value="WASSCE">WASSCE (SHS)</option>
          <option value="BECE">BECE (JHS)</option>
        </select>
      </div>

      <div class="flex flex-col md:flex-row gap-3 items-center">
        <button id="payBtn" class="btn w-full md:w-auto" type="submit">Pay GHS 25</button>
      </div>

      <div id="buyMsg" class="small"></div>
    </form>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how" class="card mb-8">
    <h3 class="text-xl font-semibold mb-3">How it works</h3>
    <ol class="muted list-decimal list-inside">
      <li>Fill your details and pay with Paystack.</li>
      <li>We verify the payment instantly.</li>
      <li>Your unused voucher is sent instantly via SMS.</li>
    </ol>
  </section>

  <!-- FAQ -->
  <section id="faq" class="card mb-8">
    <h3 class="text-xl font-semibold mb-3">Frequently asked questions</h3>
    <div class="muted">
      <strong>Delivery time:</strong> Immediately after payment.<br/>
      <strong>Didn't receive SMS?</strong> Contact support.
    </div>
  </section>

  <!-- SUPPORT -->
  <section id="support" class="card">
    <h3 class="text-xl font-semibold mb-3">Support</h3>
    <p class="muted">Need help? Contact us:</p>
    <p><strong>Phone:</strong> <a href="tel:0560340394">0560340394</a></p>
    <p><strong>Email:</strong> gyimahseth51@gmail.com</p>
  </section>

</main>

<footer class="text-center text-white/60 py-8">
  © 2025 waeccardsonline — All rights reserved.
</footer>

<script>
AOS.init({ duration: 700, once: true });

const BACKEND_URL = "https://waecghcardsonline-backend.onrender.com";
const PAYSTACK_KEY = "pk_test_bee2ecea00aef3aa6df3aa70d6accfe16e94e167";

function showMsg(text, error=false){
  const div = document.getElementById("buyMsg");
  div.textContent = text;
  div.style.color = error ? "#ff6b6b" : "#a3e635";
}

document.getElementById("buyForm").addEventListener("submit", function(e){
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const type = document.getElementById("voucherType").value;

  if(!name || !phone){
    showMsg("Please enter your name and phone number.", true);
    return;
  }

  // Auto-generated email
  const email = `${phone}@autovoucher.com`;

  let handler = PaystackPop.setup({
    key: PAYSTACK_KEY,
    email: email,
    amount: 25 * 100,
    currency: "GHS",
    metadata: {
      custom_fields: [
        { display_name: "phone", variable_name: "phone", value: phone },
        { display_name: "voucher_type", variable_name: "voucher_type", value: type }
      ]
    },

    callback: function(response){
      showMsg("Verifying payment...");

      fetch(`${BACKEND_URL}/verify-payment`, {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
          reference: response.reference,
          name,
          phone,
          email,
          type
        })
      })
      .then(r => r.json())
      .then(data => {
        if(data.success){
          showMsg("Payment successful — loading voucher...");

          const serial = data.serial;
          const pin = data.pin;

          window.location.href =
            `/success.html?serial=${encodeURIComponent(serial)}&pin=${encodeURIComponent(pin)}`;
        } else {
          showMsg("Error: " + (data.message || "Voucher delivery failed"), true);
        }
      })
      .catch(() => showMsg("Server error. Try again.", true));
    },

    onClose: function(){
      showMsg("Payment cancelled.", true);
    }
  });

  handler.openIframe();
});
</script>
</body>
</html>
